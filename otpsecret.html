<script src="https://cdn.jsdelivr.net/npm/hi-base32@0.5.1/src/base32.min.js"></script>
<script>
  function getSecret(length) {
    let secret = new Uint32Array(length * 3);
    crypto.getRandomValues(secret);
    let secretBase32 = base32.encode(secret);
    while (secretBase32.includes("undefined")) {
      secretBase32 = secretBase32.replace("undefined", "")
    }
    if (secretBase32.length < length){
      return getNewSecret();
    }else if (secretBase32.length == length){
      return secretBase32;
    }else {
      return secretBase32.slice(undefined, length);
    }
  }
</script>
